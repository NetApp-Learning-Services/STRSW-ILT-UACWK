apiVersion: v1
kind: Namespace
metadata:
  name: registry
---
# Cert used to authenticate the machines used to access the private registry
# $ openssl req -x509 -newkey rsa:4096 -days 3650 -nodes -sha256 -keyout tls.key -out tls.crt -subj "/CN=docker-registry" -addext "subjectAltName=DNS:docker-registry, IP:192.168.0.61, IP:192.168.0.62, IP:192.168.0.63, IP:192.168.0.64"
# $ kubectl create secret tls certs-secret --cert=tls.crt --key=tls.key --dry-run=client -o yaml
# Then added registry namespace

apiVersion: v1
data:
  tls.crt: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUZTekNDQXpPZ0F3SUJBZ0lVZnlOL0ZuMDI3dyttVlhmVWJwbnZRRmlvMGtnd0RRWUpLb1pJaHZjTkFRRUwKQlFBd0dqRVlNQllHQTFVRUF3d1BaRzlqYTJWeUxYSmxaMmx6ZEhKNU1CNFhEVEkwTURNeU56RTBNelV4TjFvWApEVE0wTURNeU5URTBNelV4TjFvd0dqRVlNQllHQTFVRUF3d1BaRzlqYTJWeUxYSmxaMmx6ZEhKNU1JSUNJakFOCkJna3Foa2lHOXcwQkFRRUZBQU9DQWc4QU1JSUNDZ0tDQWdFQXlKUllsNDRWNVRwenBvU2hQV2pjY2dmOEcxNC8KaVJsV2xOTlUzMmUrZ1A2ZkVMY2VycEVjWi8wMzNINmY5K2lkTWNDZ2pYbmNUMkt0WTJUQml0bzBWb29XU0hnRQphdmtNSHcxTU5HZzZybWVYc3lybEVGVlNEVFZHSkkxQ3NBN1k4bVg3SlkydVpWRnFMU3Z3NStQYzZqUjh3K0VDCkM5VjhnNzJMbGYrZkljeHhPc2p4bzEvTTE1T2JDMko3UG1obXJNQTBRNVlVQVRFeTJJRnRCM2hHWVlwQUY1aG0KekVZaGpVUVkvcHRXNkpLNlZlUmRya3JMdEdrQ2lsd3JYNzErWWNuZVZGODlHa0t3aWFKdTkwV2xjekZMaFhXVQpuQ3pNUE5CY1kvTTRKMmhwd2pJQ1ZJWld6Z0k4NmJURVcrbHZqbHNMRVRrV2JuSmJxcG9MUVM4ejQwejZkdlhwCmZZQ2Rac2Zpa0dZTG5OMHhlb0p4NXVBaGhmUHVid2YzZkhTUGRMbXdHSkw1SUhQTCt4U3h2ZlBiNWFBSlE0ajUKa1l2MS9ETzhWWjVTTkZBV21ieHNOUmNBTEFPMGVJeGkwM2dGaFZ0bE9WS2EwZ01tMncyZ0FZUmJQV3JvWC8xYgozK0Q1N01SYXhWT3MvMlp1R3ArTzlDNEhZM2tKTitXd2htNVhXTmhiZGdXczFmdTFmSlBhTzhaQmtrS1JSK00vClBLamNVMXhkTGQxU3VWQVg0cS9sa1czTXN0RmRSckZMTzdyQWRzeGh1UDVuUms0T0lDaENrTVo1RkNmMGxDcngKNHRqcDVyREJmMXE3QlFlSkZiMWM3cUZlcW45cjY1RTF1YWlEbCtMbHBSdkJrVVJUcnVNaGs2K3M0ZzBuaEFLRwptcStMZFBUSVZEVHZpSk1DQXdFQUFhT0JpRENCaFRBZEJnTlZIUTRFRmdRVTVkb0k0REp2SWFDdWZWSi9aUkxvCkt6anpBLzh3SHdZRFZSMGpCQmd3Rm9BVTVkb0k0REp2SWFDdWZWSi9aUkxvS3pqekEvOHdEd1lEVlIwVEFRSC8KQkFVd0F3RUIvekF5QmdOVkhSRUVLekFwZ2c5a2IyTnJaWEl0Y21WbmFYTjBjbm1IQk1Db0FEMkhCTUNvQUQ2SApCTUNvQUQrSEJNQ29BRUF3RFFZSktvWklodmNOQVFFTEJRQURnZ0lCQUlocDlwMjJ1S01FM21Zejd1cWxid2lsCjZteW1xcTc1bzR2QlF5dTJMNGoyRlJRelFCd2NIbis2OVVmYnFvL2VMU0xmZnBtLzF4V1IwejdOZzlSRlRjVnMKOFRKSmEwOFVQZjBpOXhOUHFCbUxEYWZ0WEVwVHpLWnNhTDlROGcvbWg5c1dIV3FLd3IvYUtlUnNGZ1U5a3VHcApuMXFNRlh5bllLVkpTdmcrMm0rVTFsTHE2d0ZCRTcrTkpRcmt3VHBtQkphODRQM3hYUXYrQ2ZSUnJHZXVjWmRlCk82bWYraHZPcnA4czNwdDZJRXBHUDJIT3ZnbVgvekZDNWpHN29wY0dsNHNZcWROQ0VESW5OUUlFd0d0ZnJyMjUKTlY5VmVCQzZ4Z3JSTFR0dGlQUncxSVFZMlNWNzNBR0Zvc0JwRmU2VmVqN21QR2YvY3dORmYwR2dla2duQTF3VAo2alhaREJkM25NakpMYkxBWEdsNmJlbzRxWVYvS3BKbjdWcGo3M24xeEoxRWxIemZ3VHAvcVR3SmZvL3VGQVRRCkpjam0xZ0FvS2VCcExLbWdFbHBJSldKd2JCR1ZzSGk0Y3ZTTTc0aEp4QXM3VUNjaTRhb2Q5U2JaWnpCL2NQZXAKUmdPZDNWd2UvZ3dCNERXcUszMVhoeGx4a2piaDlMZExCelZHcVkyOHZVWkRGRFlPQ0lrT0JLOHE0MnRmWW1ZSAoycXMvSXpnbnFYR0hqbFJldURVak5XSXB5NFJSdVhFbDJDN0E4VUZGazc5amxjYnBVSDB2V1hOb2JsUWFSa2FrCmU0aUxJKzFZY1RFMmt5aGp1OXlrQ2ZFSEJwVm42YXYyNVV1Q1h6TmpwaTZMVXltVVVvclByTFBxQjdSZHJ6MUoKRmxidnBzSEtuMFlaVEhtRnpzR1AKLS0tLS1FTkQgQ0VSVElGSUNBVEUtLS0tLQo=
  tls.key: LS0tLS1CRUdJTiBQUklWQVRFIEtFWS0tLS0tCk1JSUpRQUlCQURBTkJna3Foa2lHOXcwQkFRRUZBQVNDQ1Nvd2dna21BZ0VBQW9JQ0FRRElsRmlYamhYbE9uT20KaEtFOWFOeHlCL3diWGorSkdWYVUwMVRmWjc2QS9wOFF0eDZ1a1J4bi9UZmNmcC8zNkoweHdLQ05lZHhQWXExagpaTUdLMmpSV2loWkllQVJxK1F3ZkRVdzBhRHF1WjVlekt1VVFWVklOTlVZa2pVS3dEdGp5WmZzbGphNWxVV290CksvRG40OXpxTkh6RDRRSUwxWHlEdll1Vi81OGh6SEU2eVBHalg4elhrNXNMWW5zK2FHYXN3RFJEbGhRQk1UTFkKZ1cwSGVFWmhpa0FYbUdiTVJpR05SQmorbTFib2tycFY1RjJ1U3N1MGFRS0tYQ3Rmdlg1aHlkNVVYejBhUXJDSgpvbTczUmFWek1VdUZkWlNjTE13ODBGeGo4emduYUduQ01nSlVobGJPQWp6cHRNUmI2VytPV3dzUk9SWnVjbHVxCm1ndEJMelBqVFBwMjllbDlnSjFteCtLUVpndWMzVEY2Z25IbTRDR0Y4KzV2Qi9kOGRJOTB1YkFZa3ZrZ2M4djcKRkxHOTg5dmxvQWxEaVBtUmkvWDhNN3hWbmxJMFVCYVp2R3cxRndBc0E3UjRqR0xUZUFXRlcyVTVVcHJTQXliYgpEYUFCaEZzOWF1aGYvVnZmNFBuc3hGckZVNnovWm00YW40NzBMZ2RqZVFrMzViQ0dibGRZMkZ0MkJhelYrN1Y4Cms5bzd4a0dTUXBGSDR6ODhxTnhUWEYwdDNWSzVVQmZpcitXUmJjeXkwVjFHc1VzN3VzQjJ6R0c0L21kR1RnNGcKS0VLUXhua1VKL1NVS3ZIaTJPbm1zTUYvV3JzRkI0a1Z2Vnp1b1Y2cWYydnJrVFc1cUlPWDR1V2xHOEdSUkZPdQo0eUdUcjZ6aURTZUVBb2FhcjR0MDlNaFVOTytJa3dJREFRQUJBb0lCL3hSZS9LQm56ZEY2SGtUTE01VUpFVnFECmRSZFNleUZ4Y1Ztc0hQS1Rsc1dERnFTYjlJSEdPeHhVbTFmSmhIV3BLazNqUW1zYjlVUWF3WUZXdWxGZjEvRHkKRlZGRzN5ditIejBJSExVMTRML1Z4WkpzeU5iZjAzV0Q4NXZDdlFNa2Z1UWZkMkpaQVYxSTUzK3U5c2lXVzlsdAplejVwbTh1WDR3MStNcThKUnlBbm8xaFZFRFdIaFVaZnQxOXdvUk8xaHJnRXpVb1A4L2dyQnY3MkpoeWNHb25OCmdMVGt4WXY1azI3RmU4UmdBbk9jYzFCRjRUM1NXdDMzekVwQkVpYW5HQzdXVWI0LzdmUzgwVEVwVGh2Tzl2NjgKQXUrTEFZemEvK010UmpUZ2Z0T0J4enZ4MkVxOVdoT1NKcDJWdmx1WFdiMGJnZ1E5eUFsdms5Ky94V1RaWm11QgpTVTExejNadTIvYm84V0EzK292Z2YxUm0wcDlZd0dZNi9NaGFma1l3QS93UVh2dnE4ZzdxWGlNS3FlRytlSDhlClNHVi9BVVRJaFlqaDhKQ1Z3WUM3dFJwWXQ2ZmJPeWN2ZWtIaGdXYkFpQ3FtMFBtZXdLRktCbC84SG54NlNMbzcKVFArUmtpK1FtU0phZllqd1kzb1YrOVd2VVpBYjIzQnpJdHhCUUludldnZHVndGk3NUY2SDZxU1FkVXZJVVBBaQpkQkw3NUkrK3NXek1wZXRkYklDT1lsZUVORXl5Uy9UMWwvUS9MeWFPT3ZkYTNaTE92dlZ5MGxIb0ZKMWlFZTJRClVPRnNpVjN6VHUybncrU3FiRnExTWNEUDFKNjNxc2doKytCdWZxVkIxV1JIdDBwZXJBMElZQzdIMXlQQzNJTHYKVG5WK2pRdTlOdnhHMTRnejNiRUNnZ0VCQVBDbjhiMkZRaFYxNktJM0VITmx0cXBDR3FidGsxWVF0MW9JbXBRWQo2aUFGcWhFWGI2QkIva3NyRHBXSzdnUEd1K0wxbTRBamRtdHNvZ2RwM0xFZkFLd2RKM0lkQ1BNQ0Q0cGZVNXBQCkxBOElxMVBRNnFZZnZ0OXZZaHNvdC9jQkhJQk1YZXNYQWdPSlRGSU9hZzZOQ3dxbk1aclRvenJJakRWeFRYWWsKN01KaUNEM3R3MGN0a0ZrUHArUW1wR21pa1pqVXQwanBNMG5GNlJnRGxlc21tU0d2VjFiWUNZWHJhR1pucldENApxdmQyVEJqQ09iKzJHd250VVpzdHprNVVLdGNDQ0FIVEV6c0ZsamViNG5McEFTSjdoWWtyUk0wcVhZU0QzTjVlCng4S0VRUnNyVVJHbUY1djRZVDYwQ3J2bW8xaXZ3dUtTbmZ5ZDV5NERzSjQxYitjQ2dnRUJBTlZlUXNyNHJ5em8KZ0d1QlRTQmpTaFQzTDU3d1paQTZzVDE1Wk1uRXN3THFqc3g2cGhyTEQ5V3FRUlRPODA4U3kxTHhES3hFdXNBagp3b0JFT0s3M1FvUmRoWE4yaVBQZ2V0V1Z0UnZMODZTNHVxOGgxRGtDZFREMTIxQVFML3ZyelJHM1NFZTljRGd1CnFzVERtL2NiMi82Z1RyNU1rYW92bVNvOFB6TmNacGxZSVlGcTlVRVI4ck9HbE4vd0N5VmMxTmNjK0pxcFNBUDMKTkMvd0RmaWpsb2drb0FUbjlUREhLbHV4aHpGc01OMFR6RkxSYnNWa3N6S1pQWWtqVVpqSk83RUIzWDJnM29PTQo1SVlDckZyYnFmMHdhTUlqa0wydllxU1pNZjN6dVVPOTM0Rytqa1dOZkpCMnVHa2ZqT0FTVkdkOXVUMWswblZJCjRZMWtEM1ZFL0hVQ2dnRUFLNUtjNkcycVMyeHYxSDhYMFcwSEo4aVVQc2toTmlJTXNKYUNObkpVWWJ2azBQZG4KVktMZVFnbm51QmZSaEltRkYxRFUrTnh5NG54bTBlVE8rcHJjYWsxVkNRcE14b01IQVV6RlBGazladk53NGRvZgp3amhaUE9kVDRncjdWQk8xYjExa1c5NXNsT3RWRUQ1ZjRZYVVDemUrZVlQOE4vWjd2R2xwVnd6VWVWVjZuSXZpCklZOFVaYXU2QUVzbTFhR0RyeUpFbFVUejdsV1JJTEgxZ1FBYUZjbERqUXZNblp6RDZGYTVRNmVDZlEvRU0yOW4KT1ZqbGlHU1pzL2tWTTRWMXhEd3Y2dlNtdExjTVBjRlJ2UENITGhFalduU2xIbWlmU2hEOStwMDZtZk9NUGprWAprcFI2RGRsbzhndHpMaFpTV1FwcHhOQTdIclFRV1hwOWpnZXEzUUtDQVFCM0pTKy9ENmNpT0tLZFpaS2Y1MUhTCjYwVVlSNzB2RU5jd01MMXJQZitJUFZxSUxHVGN5VStLVEl3VEJvMHZOcHQ3TVVlV1dycTkyRG9nVGZncEc4RjEKRUpRWXFiUklHcTM4M3FCSGFWZ2dQMWRmdkZBNWxYbkRZVWFhS3EvZ3lRZTJRTmFIMk96MU1ub0JiZ21GcjNUbApkcmNCNU5maVpMbnVyNzNLL0duK2J3d21ySWRQVXFwb1BWcWN3Zm8zWHVNclMrNDJ6eGg3dm1yUjZnYWpOUlkxCjU5M0RYNU8zTFVBbCs3ZzJqT2VzVEFYb3FUSmwzNW1CUTdqcy8xL3RKVkhEd2ZyZzBCZnc5WmdXalIrWmpOZ2IKbmhDaGVDSzNDVnpYOVFQSmYzT1F0RkkrclIzZEVPamg4cWwvYWpMTVhPL3M2bk9xS01hczM0bXozcEFUTi9hUgpBb0lCQUdRTDM1eHoyTWV6cm1DaVVjSUo5K3lRNkhTb2VvTlN5K1lvc2xTSVptRkljOG5heFVQZnMrWWJ6dGxvCjdiVlgyY1B5My9Gb0g4YnJ5dXNkUDVGWkVNNUNKeVN0UkRzMXRJYzcydW5HZThmNmNHajJzRGFMOWJrc3VTUGoKcGt3cXZBeThEenlJSHpST0RmOUNDenpQUFNiYXdtb25TcW1YY3kyL1liYzJUUnAyU1BheGNGa1VEeXlOeThLbwpRSzdLcjVMRHc2NEgyR2ZIaWNET2NKSnVEdHZ3VVQzeFNFckY1YUd6VENZYnhlaTJHSmVtczRXL2ZIeGJVKytVCnRLeWs0d1ZJb01IanJyQXZ2d2grcmpVMVhkVktHeVMrek1jM1d2YmJKUUhCUVVId0FZRVRQdHVQVmd1WGFjSlgKWk83RGpRc3hiUjR3aVJlUlZyTnQzN2FLODJNPQotLS0tLUVORCBQUklWQVRFIEtFWS0tLS0tCg==
kind: Secret
metadata:
  name: certs-secret
  namespace: registry
type: kubernetes.io/tls

---
# Password used to authenticate with registry
# $ sudo apt update
# $ sudo apt install apache2-utils -y
# $ htpasswd -Bcb htpasswd admin Netapp1!
# $ kubectl create secret generic auth-secret --from-file=htpasswd --dry-run=client -o yaml
# Then added registry namespace

apiVersion: v1
data:
  htpasswd: YWRtaW46JDJ5JDA1JFFaSjQ5ME9hNi9GZjRPRGxVeEhrY2VJVWR2dU91MFV3TmpBUUFnWDFCSUMxL05KL2tvbGdLCg==
kind: Secret
metadata:
  name: auth-secret
  namespace: registry